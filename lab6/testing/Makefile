# This makefile is defined to give you the following targets:
#
#    default: Same as check
#    check: 
#    clean: Remove all files and directories generated by testing.
#

SHELL = /bin/bash

# Flags to Java interpreter: check assertions
JFLAGS = -ea

# See comment in ../Makefile
PYTHON = python3

RMAKE = "$(MAKE)"

TESTER = $(PYTHON) tester.py

TESTER_FLAGS =

SRCDIR = our-src

TESTS = our/*.in

.PHONY: default check clean std

# First, and therefore default, target.
default:
	$(RMAKE) -C .. 
	$(RMAKE) PYTHON=$(PYTHON) check

check:
	@CLASSPATH=..:$(CLASSPATH) java -ea capers.Main >/dev/null 2>&1 || true
	@echo "Testing application capers.Main..."
	$(TESTER) $(TESTER_FLAGS) --src=$(SRCDIR) $(TESTS)

# 'make clean' will clean up stuff you can reconstruct.
clean:
	$(RM) -r */*~ *~ __pycache__
